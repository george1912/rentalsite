{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport * as MapboxGl from 'mapbox-gl';\nimport * as React from 'react';\nimport { listenEvents, events, updateEvents } from './map-events';\nimport { MapContext } from './context';\nimport { createPortal } from 'react-dom';\nvar isEqual = require('deep-equal');\nvar defaultZoom = [11];\nvar defaultMovingMethod = 'flyTo';\nvar defaultCenter = [-0.2416815, 51.5285582];\nvar ReactMapboxFactory = function (_a) {\n  var accessToken = _a.accessToken,\n    apiUrl = _a.apiUrl,\n    _b = _a.minZoom,\n    minZoom = _b === void 0 ? 0 : _b,\n    _c = _a.maxZoom,\n    maxZoom = _c === void 0 ? 20 : _c,\n    _d = _a.hash,\n    hash = _d === void 0 ? false : _d,\n    _e = _a.preserveDrawingBuffer,\n    preserveDrawingBuffer = _e === void 0 ? false : _e,\n    _f = _a.scrollZoom,\n    scrollZoom = _f === void 0 ? true : _f,\n    _g = _a.interactive,\n    interactive = _g === void 0 ? true : _g,\n    _h = _a.dragRotate,\n    dragRotate = _h === void 0 ? true : _h,\n    _j = _a.pitchWithRotate,\n    pitchWithRotate = _j === void 0 ? true : _j,\n    _k = _a.attributionControl,\n    attributionControl = _k === void 0 ? true : _k,\n    customAttribution = _a.customAttribution,\n    _l = _a.logoPosition,\n    logoPosition = _l === void 0 ? 'bottom-left' : _l,\n    _m = _a.renderWorldCopies,\n    renderWorldCopies = _m === void 0 ? true : _m,\n    _o = _a.trackResize,\n    trackResize = _o === void 0 ? true : _o,\n    _p = _a.touchZoomRotate,\n    touchZoomRotate = _p === void 0 ? true : _p,\n    _q = _a.doubleClickZoom,\n    doubleClickZoom = _q === void 0 ? true : _q,\n    _r = _a.keyboard,\n    keyboard = _r === void 0 ? true : _r,\n    _s = _a.dragPan,\n    dragPan = _s === void 0 ? true : _s,\n    _t = _a.boxZoom,\n    boxZoom = _t === void 0 ? true : _t,\n    _u = _a.refreshExpiredTiles,\n    refreshExpiredTiles = _u === void 0 ? true : _u,\n    _v = _a.failIfMajorPerformanceCaveat,\n    failIfMajorPerformanceCaveat = _v === void 0 ? false : _v,\n    _w = _a.bearingSnap,\n    bearingSnap = _w === void 0 ? 7 : _w,\n    _x = _a.injectCSS,\n    injectCSS = _x === void 0 ? true : _x,\n    _y = _a.antialias,\n    antialias = _y === void 0 ? false : _y,\n    transformRequest = _a.transformRequest;\n  var _z;\n  if (injectCSS) {\n    require('mapbox-gl/dist/mapbox-gl.css');\n  }\n  return _z = function (_super) {\n    __extends(ReactMapboxGl, _super);\n    function ReactMapboxGl() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n      _this.state = {\n        map: undefined,\n        ready: false\n      };\n      _this.listeners = {};\n      _this._isMounted = true;\n      _this.calcCenter = function (bounds) {\n        return [(bounds[0][0] + bounds[1][0]) / 2, (bounds[0][1] + bounds[1][1]) / 2];\n      };\n      _this.setRef = function (x) {\n        _this.container = x;\n      };\n      return _this;\n    }\n    ReactMapboxGl.prototype.componentDidMount = function () {\n      var _this = this;\n      var _a = this.props,\n        style = _a.style,\n        onStyleLoad = _a.onStyleLoad,\n        center = _a.center,\n        pitch = _a.pitch,\n        zoom = _a.zoom,\n        fitBounds = _a.fitBounds,\n        fitBoundsOptions = _a.fitBoundsOptions,\n        bearing = _a.bearing,\n        maxBounds = _a.maxBounds;\n      MapboxGl.accessToken = accessToken;\n      if (apiUrl) {\n        MapboxGl.config.API_URL = apiUrl;\n      }\n      if (!Array.isArray(zoom)) {\n        throw new Error('zoom need to be an array type of length 1 for reliable update');\n      }\n      var opts = {\n        preserveDrawingBuffer: preserveDrawingBuffer,\n        hash: hash,\n        zoom: zoom[0],\n        minZoom: minZoom,\n        maxZoom: maxZoom,\n        maxBounds: maxBounds,\n        container: this.container,\n        center: fitBounds && center === defaultCenter ? this.calcCenter(fitBounds) : center,\n        style: style,\n        scrollZoom: scrollZoom,\n        attributionControl: attributionControl,\n        customAttribution: customAttribution,\n        interactive: interactive,\n        dragRotate: dragRotate,\n        pitchWithRotate: pitchWithRotate,\n        renderWorldCopies: renderWorldCopies,\n        trackResize: trackResize,\n        touchZoomRotate: touchZoomRotate,\n        doubleClickZoom: doubleClickZoom,\n        keyboard: keyboard,\n        dragPan: dragPan,\n        boxZoom: boxZoom,\n        refreshExpiredTiles: refreshExpiredTiles,\n        logoPosition: logoPosition,\n        bearingSnap: bearingSnap,\n        failIfMajorPerformanceCaveat: failIfMajorPerformanceCaveat,\n        antialias: antialias,\n        transformRequest: transformRequest\n      };\n      if (bearing) {\n        if (!Array.isArray(bearing)) {\n          throw new Error('bearing need to be an array type of length 1 for reliable update');\n        }\n        opts.bearing = bearing[0];\n      }\n      if (pitch) {\n        if (!Array.isArray(pitch)) {\n          throw new Error('pitch need to be an array type of length 1 for reliable update');\n        }\n        opts.pitch = pitch[0];\n      }\n      var map = new MapboxGl.Map(opts);\n      this.setState({\n        map: map\n      });\n      if (fitBounds) {\n        map.fitBounds(fitBounds, fitBoundsOptions, {\n          fitboundUpdate: true\n        });\n      }\n      map.on('load', function (evt) {\n        if (_this._isMounted) {\n          _this.setState({\n            ready: true\n          });\n        }\n        if (onStyleLoad) {\n          onStyleLoad(map, evt);\n        }\n      });\n      this.listeners = listenEvents(events, this.props, map);\n    };\n    ReactMapboxGl.prototype.componentWillUnmount = function () {\n      var map = this.state.map;\n      this._isMounted = false;\n      if (map) {\n        map.remove();\n      }\n    };\n    ReactMapboxGl.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n      var map = this.state.map;\n      if (!map) {\n        return null;\n      }\n      this.listeners = updateEvents(this.listeners, nextProps, map);\n      var center = map.getCenter();\n      var zoom = map.getZoom();\n      var bearing = map.getBearing();\n      var pitch = map.getPitch();\n      var didZoomUpdate = this.props.zoom !== nextProps.zoom && (nextProps.zoom && nextProps.zoom[0]) !== zoom;\n      var didCenterUpdate = this.props.center !== nextProps.center && ((nextProps.center && nextProps.center[0]) !== center.lng || (nextProps.center && nextProps.center[1]) !== center.lat);\n      var didBearingUpdate = this.props.bearing !== nextProps.bearing && (nextProps.bearing && nextProps.bearing[0]) !== bearing;\n      var didPitchUpdate = this.props.pitch !== nextProps.pitch && (nextProps.pitch && nextProps.pitch[0]) !== pitch;\n      if (nextProps.maxBounds) {\n        var didMaxBoundsUpdate = this.props.maxBounds !== nextProps.maxBounds;\n        if (didMaxBoundsUpdate) {\n          map.setMaxBounds(nextProps.maxBounds);\n        }\n      }\n      if (nextProps.fitBounds) {\n        var fitBounds = this.props.fitBounds;\n        var didFitBoundsUpdate = fitBounds !== nextProps.fitBounds || nextProps.fitBounds.length !== (fitBounds && fitBounds.length) || !!fitBounds.filter(function (c, i) {\n          var nc = nextProps.fitBounds && nextProps.fitBounds[i];\n          return c[0] !== (nc && nc[0]) || c[1] !== (nc && nc[1]);\n        })[0];\n        if (didFitBoundsUpdate || !isEqual(this.props.fitBoundsOptions, nextProps.fitBoundsOptions)) {\n          map.fitBounds(nextProps.fitBounds, nextProps.fitBoundsOptions, {\n            fitboundUpdate: true\n          });\n        }\n      }\n      if (didZoomUpdate || didCenterUpdate || didBearingUpdate || didPitchUpdate) {\n        var mm = nextProps.movingMethod || defaultMovingMethod;\n        var flyToOptions = nextProps.flyToOptions,\n          animationOptions = nextProps.animationOptions;\n        map[mm](__assign({}, animationOptions, flyToOptions, {\n          zoom: didZoomUpdate && nextProps.zoom ? nextProps.zoom[0] : zoom,\n          center: didCenterUpdate ? nextProps.center : center,\n          bearing: didBearingUpdate ? nextProps.bearing : bearing,\n          pitch: didPitchUpdate ? nextProps.pitch : pitch\n        }));\n      }\n      if (!isEqual(this.props.style, nextProps.style)) {\n        map.setStyle(nextProps.style);\n      }\n      return null;\n    };\n    ReactMapboxGl.prototype.render = function () {\n      var _a = this.props,\n        containerStyle = _a.containerStyle,\n        className = _a.className,\n        children = _a.children,\n        renderChildrenInPortal = _a.renderChildrenInPortal;\n      var _b = this.state,\n        ready = _b.ready,\n        map = _b.map;\n      if (renderChildrenInPortal) {\n        var container = ready && map && typeof map.getCanvasContainer === 'function' ? map.getCanvasContainer() : undefined;\n        return React.createElement(MapContext.Provider, {\n          value: map\n        }, React.createElement(\"div\", {\n          ref: this.setRef,\n          className: className,\n          style: __assign({}, containerStyle)\n        }, ready && container && createPortal(children, container)));\n      }\n      return React.createElement(MapContext.Provider, {\n        value: map\n      }, React.createElement(\"div\", {\n        ref: this.setRef,\n        className: className,\n        style: __assign({}, containerStyle)\n      }, ready && children));\n    };\n    return ReactMapboxGl;\n  }(React.Component), _z.defaultProps = {\n    onStyleLoad: function (map, evt) {\n      return null;\n    },\n    center: defaultCenter,\n    zoom: defaultZoom,\n    bearing: 0,\n    movingMethod: defaultMovingMethod,\n    pitch: 0,\n    containerStyle: {\n      textAlign: 'left'\n    }\n  }, _z;\n};\nexport default ReactMapboxFactory;","map":{"version":3,"sources":["../src/map.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as MapboxGl from 'mapbox-gl';\nimport * as React from 'react';\nimport { listenEvents, events, updateEvents } from './map-events';\nimport { MapContext } from './context';\nimport { createPortal } from 'react-dom';\nvar isEqual = require('deep-equal');\nvar defaultZoom = [11];\nvar defaultMovingMethod = 'flyTo';\nvar defaultCenter = [-0.2416815, 51.5285582];\nvar ReactMapboxFactory = function (_a) {\n    var accessToken = _a.accessToken, apiUrl = _a.apiUrl, _b = _a.minZoom, minZoom = _b === void 0 ? 0 : _b, _c = _a.maxZoom, maxZoom = _c === void 0 ? 20 : _c, _d = _a.hash, hash = _d === void 0 ? false : _d, _e = _a.preserveDrawingBuffer, preserveDrawingBuffer = _e === void 0 ? false : _e, _f = _a.scrollZoom, scrollZoom = _f === void 0 ? true : _f, _g = _a.interactive, interactive = _g === void 0 ? true : _g, _h = _a.dragRotate, dragRotate = _h === void 0 ? true : _h, _j = _a.pitchWithRotate, pitchWithRotate = _j === void 0 ? true : _j, _k = _a.attributionControl, attributionControl = _k === void 0 ? true : _k, customAttribution = _a.customAttribution, _l = _a.logoPosition, logoPosition = _l === void 0 ? 'bottom-left' : _l, _m = _a.renderWorldCopies, renderWorldCopies = _m === void 0 ? true : _m, _o = _a.trackResize, trackResize = _o === void 0 ? true : _o, _p = _a.touchZoomRotate, touchZoomRotate = _p === void 0 ? true : _p, _q = _a.doubleClickZoom, doubleClickZoom = _q === void 0 ? true : _q, _r = _a.keyboard, keyboard = _r === void 0 ? true : _r, _s = _a.dragPan, dragPan = _s === void 0 ? true : _s, _t = _a.boxZoom, boxZoom = _t === void 0 ? true : _t, _u = _a.refreshExpiredTiles, refreshExpiredTiles = _u === void 0 ? true : _u, _v = _a.failIfMajorPerformanceCaveat, failIfMajorPerformanceCaveat = _v === void 0 ? false : _v, _w = _a.bearingSnap, bearingSnap = _w === void 0 ? 7 : _w, _x = _a.injectCSS, injectCSS = _x === void 0 ? true : _x, _y = _a.antialias, antialias = _y === void 0 ? false : _y, transformRequest = _a.transformRequest;\n    var _z;\n    if (injectCSS) {\n        require('mapbox-gl/dist/mapbox-gl.css');\n    }\n    return _z = (function (_super) {\n            __extends(ReactMapboxGl, _super);\n            function ReactMapboxGl() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                _this.state = {\n                    map: undefined,\n                    ready: false\n                };\n                _this.listeners = {};\n                _this._isMounted = true;\n                _this.calcCenter = function (bounds) { return [\n                    (bounds[0][0] + bounds[1][0]) / 2,\n                    (bounds[0][1] + bounds[1][1]) / 2\n                ]; };\n                _this.setRef = function (x) {\n                    _this.container = x;\n                };\n                return _this;\n            }\n            ReactMapboxGl.prototype.componentDidMount = function () {\n                var _this = this;\n                var _a = this.props, style = _a.style, onStyleLoad = _a.onStyleLoad, center = _a.center, pitch = _a.pitch, zoom = _a.zoom, fitBounds = _a.fitBounds, fitBoundsOptions = _a.fitBoundsOptions, bearing = _a.bearing, maxBounds = _a.maxBounds;\n                MapboxGl.accessToken = accessToken;\n                if (apiUrl) {\n                    MapboxGl.config.API_URL = apiUrl;\n                }\n                if (!Array.isArray(zoom)) {\n                    throw new Error('zoom need to be an array type of length 1 for reliable update');\n                }\n                var opts = {\n                    preserveDrawingBuffer: preserveDrawingBuffer,\n                    hash: hash,\n                    zoom: zoom[0],\n                    minZoom: minZoom,\n                    maxZoom: maxZoom,\n                    maxBounds: maxBounds,\n                    container: this.container,\n                    center: fitBounds && center === defaultCenter\n                        ? this.calcCenter(fitBounds)\n                        : center,\n                    style: style,\n                    scrollZoom: scrollZoom,\n                    attributionControl: attributionControl,\n                    customAttribution: customAttribution,\n                    interactive: interactive,\n                    dragRotate: dragRotate,\n                    pitchWithRotate: pitchWithRotate,\n                    renderWorldCopies: renderWorldCopies,\n                    trackResize: trackResize,\n                    touchZoomRotate: touchZoomRotate,\n                    doubleClickZoom: doubleClickZoom,\n                    keyboard: keyboard,\n                    dragPan: dragPan,\n                    boxZoom: boxZoom,\n                    refreshExpiredTiles: refreshExpiredTiles,\n                    logoPosition: logoPosition,\n                    bearingSnap: bearingSnap,\n                    failIfMajorPerformanceCaveat: failIfMajorPerformanceCaveat,\n                    antialias: antialias,\n                    transformRequest: transformRequest\n                };\n                if (bearing) {\n                    if (!Array.isArray(bearing)) {\n                        throw new Error('bearing need to be an array type of length 1 for reliable update');\n                    }\n                    opts.bearing = bearing[0];\n                }\n                if (pitch) {\n                    if (!Array.isArray(pitch)) {\n                        throw new Error('pitch need to be an array type of length 1 for reliable update');\n                    }\n                    opts.pitch = pitch[0];\n                }\n                var map = new MapboxGl.Map(opts);\n                this.setState({ map: map });\n                if (fitBounds) {\n                    map.fitBounds(fitBounds, fitBoundsOptions, { fitboundUpdate: true });\n                }\n                map.on('load', function (evt) {\n                    if (_this._isMounted) {\n                        _this.setState({ ready: true });\n                    }\n                    if (onStyleLoad) {\n                        onStyleLoad(map, evt);\n                    }\n                });\n                this.listeners = listenEvents(events, this.props, map);\n            };\n            ReactMapboxGl.prototype.componentWillUnmount = function () {\n                var map = this.state.map;\n                this._isMounted = false;\n                if (map) {\n                    map.remove();\n                }\n            };\n            ReactMapboxGl.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n                var map = this.state.map;\n                if (!map) {\n                    return null;\n                }\n                this.listeners = updateEvents(this.listeners, nextProps, map);\n                var center = map.getCenter();\n                var zoom = map.getZoom();\n                var bearing = map.getBearing();\n                var pitch = map.getPitch();\n                var didZoomUpdate = this.props.zoom !== nextProps.zoom &&\n                    (nextProps.zoom && nextProps.zoom[0]) !== zoom;\n                var didCenterUpdate = this.props.center !== nextProps.center &&\n                    ((nextProps.center && nextProps.center[0]) !== center.lng ||\n                        (nextProps.center && nextProps.center[1]) !== center.lat);\n                var didBearingUpdate = this.props.bearing !== nextProps.bearing &&\n                    (nextProps.bearing && nextProps.bearing[0]) !== bearing;\n                var didPitchUpdate = this.props.pitch !== nextProps.pitch &&\n                    (nextProps.pitch && nextProps.pitch[0]) !== pitch;\n                if (nextProps.maxBounds) {\n                    var didMaxBoundsUpdate = this.props.maxBounds !== nextProps.maxBounds;\n                    if (didMaxBoundsUpdate) {\n                        map.setMaxBounds(nextProps.maxBounds);\n                    }\n                }\n                if (nextProps.fitBounds) {\n                    var fitBounds = this.props.fitBounds;\n                    var didFitBoundsUpdate = fitBounds !== nextProps.fitBounds ||\n                        nextProps.fitBounds.length !== (fitBounds && fitBounds.length) ||\n                        !!fitBounds.filter(function (c, i) {\n                            var nc = nextProps.fitBounds && nextProps.fitBounds[i];\n                            return c[0] !== (nc && nc[0]) || c[1] !== (nc && nc[1]);\n                        })[0];\n                    if (didFitBoundsUpdate ||\n                        !isEqual(this.props.fitBoundsOptions, nextProps.fitBoundsOptions)) {\n                        map.fitBounds(nextProps.fitBounds, nextProps.fitBoundsOptions, {\n                            fitboundUpdate: true\n                        });\n                    }\n                }\n                if (didZoomUpdate ||\n                    didCenterUpdate ||\n                    didBearingUpdate ||\n                    didPitchUpdate) {\n                    var mm = nextProps.movingMethod || defaultMovingMethod;\n                    var flyToOptions = nextProps.flyToOptions, animationOptions = nextProps.animationOptions;\n                    map[mm](__assign({}, animationOptions, flyToOptions, { zoom: didZoomUpdate && nextProps.zoom ? nextProps.zoom[0] : zoom, center: didCenterUpdate ? nextProps.center : center, bearing: didBearingUpdate ? nextProps.bearing : bearing, pitch: didPitchUpdate ? nextProps.pitch : pitch }));\n                }\n                if (!isEqual(this.props.style, nextProps.style)) {\n                    map.setStyle(nextProps.style);\n                }\n                return null;\n            };\n            ReactMapboxGl.prototype.render = function () {\n                var _a = this.props, containerStyle = _a.containerStyle, className = _a.className, children = _a.children, renderChildrenInPortal = _a.renderChildrenInPortal;\n                var _b = this.state, ready = _b.ready, map = _b.map;\n                if (renderChildrenInPortal) {\n                    var container = ready && map && typeof map.getCanvasContainer === 'function'\n                        ? map.getCanvasContainer()\n                        : undefined;\n                    return (React.createElement(MapContext.Provider, { value: map },\n                        React.createElement(\"div\", { ref: this.setRef, className: className, style: __assign({}, containerStyle) }, ready && container && createPortal(children, container))));\n                }\n                return (React.createElement(MapContext.Provider, { value: map },\n                    React.createElement(\"div\", { ref: this.setRef, className: className, style: __assign({}, containerStyle) }, ready && children)));\n            };\n            return ReactMapboxGl;\n        }(React.Component)),\n        _z.defaultProps = {\n            onStyleLoad: function (map, evt) { return null; },\n            center: defaultCenter,\n            zoom: defaultZoom,\n            bearing: 0,\n            movingMethod: defaultMovingMethod,\n            pitch: 0,\n            containerStyle: {\n                textAlign: 'left'\n            }\n        },\n        _z;\n};\nexport default ReactMapboxFactory;\n//# sourceMappingURL=map.js.map"]},"metadata":{},"sourceType":"module"}